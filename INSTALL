Sphinx 0.9.6 installation notes
================================

Supported operating systems
----------------------------

Most modern UNIX systems with a C++ compiler should be able
to compile and run Sphinx without any modifications.

Currently known systems Sphinx has been successfully compiled and
tested on are:

   - FreeBSD 4.x, 5.x, 6.x
   - Linux 2.4.x, 2.6.x (various distributions)
   - Windows 2000, XP
   - NetBSD 1.6

We hope Sphinx will work on other Unix platforms as well. 
If the platform your run Sphinx on is not in this list,
please do report it!

Required tools
---------------

On UNIX, you will need the following tools to build
and install Sphinx:

   - a working C++ compiler. GNU gcc is known to work.
   - a good make program. GNU make is known to work.

On Windows, you will need Microsoft Visual C/C++ Studio .NET 2003.
Other compilers/environments will probably work as well, but for the
time being, you will have to build makefile or project file yourself.

Installing Sphinx
------------------

1. Extract everything from the distribution tarball (haven't you already?)
   and go to the 'sphinx' subdirectory:

      $ tar xzvf sphinx-0.9.6.tar.gz
      $ cd sphinx

2. Run the configuration program:

      $ ./configure

   There's a number of options to configure. The complete listing may
   be obtained by using '--help' switch. The most important ones are:
   
      '--prefix', which specifies where to install Sphinx;

      '--with-mysql', which specifies where to look for MySQL
      include and library files, if auto-detection fails;

      '--with-pgsql', which specifies where to look for PostgreSQL
      include and library files.

3. Build the binaries:

      $ make

4. Install the binaries in the directory of your choice:

      $ make install

Known installation problems
----------------------------

If 'configure' fails to locate MySQL headers and/or libraries,
try checking for and installing 'mysql-devel' package. On some systems,
it is not installed by default.

If 'make' fails with a message which look like

   /bin/sh: g++: command not found
   make[1]: *** [libsphinx_a-sphinx.o] Error 127

try checking for and installing 'gcc-c++' package.

If you are getting compile-time errors which look like

   sphinx.cpp:67: error: invalid application of `sizeof' to
      incomplete type `Private::SizeError<false>'

that means that some compile-time type size check failed.
The most probable reason is that off_t type is less than 64-bit
on your system. As a quick hack, you can edit sphinx.h and replace off_t
with DWORD in a typedef for SphOffset_t, but note that this will prohibit
you from using full-text indices larger than 2 GB. Even if the hack helps,
please report such issues, providing the exact error message and
compiler/OS details, so I could fix them in next releases.

If you keep getting any other error, or the suggestions above
do not seem to help you, please don't hesitate to contact me.

Quick Sphinx usage guide
-------------------------

All the example commands below assume that you installed Sphinx
in '/usr/local/sphinx'.

To use Sphinx, you need to:

1. Create a configuration file.

   Default configuration file name is 'sphinx.conf'. All Sphinx
   programs look for this file in working directory by default.

   Sample configuration file, 'sphinx.conf.dist', which has all the
   options documented, is created by 'configure'. Copy and edit that
   sample file to make your own configuration:

   $ cd /usr/local/sphinx/etc
   $ cp sphinx.conf.dist sphinx.conf
   $ vi sphinx.conf

   Sample file should index 'documents' table from MySQL database 'test';
   so there's 'example.sql' sample data file to populate that table with
   a few documents for testing purposes:

   $ mysql -u test <example.sql

2. Run the indexer to create full-text index from your data:

   $ cd /usr/local/sphinx/etc
   $ /usr/local/sphinx/bin/indexer

3. Run the command-line client to query newly created index:

   $ cd /usr/local/sphinx/etc
   $ /usr/local/sphinx/bin/search test

To use Sphinx from your PHP scripts, you need to:

1. Run the search daemon which your script will talk to:

   $ cd /usr/local/sphinx/etc
   $ /usr/local/sphinx/bin/searchd

2. Run the attached PHP API test script (to ensure that the daemon
   was succesfully started and is ready to serve the queries):

   $ cd sphinx/api
   $ php test.php test

3. Include the API (it's located in api/sphinxapi.php) and use from
   your own scripts.

Happy searching!

Contacts
---------

E-mail: shodan(at)shodan.ru
Web: http://shodan.ru/contact/

--eof--
